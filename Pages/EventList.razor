@page "/events"
@using EventEaseApp.Models
@using EventEaseApp.Services
@inject EventService EventService

<h2>Events</h2>

@if (Events is null)
{
    <p>Loading events...</p>
}
else if (!Events.Any())
{
    <p>No events available.</p>
}
else
{
    <Virtualize Items="Events.Cast<Event>().ToList()" Context="evt">
        <div @key="evt.Id" class="mb-3">
            <EventCard EventData="@evt" />
            <NavLink class="btn btn-primary mt-2"
                     href="@($"/events/{evt.Id}")">
                     View Details
            </NavLink>
        </div>
    </Virtualize>
}

@code {
    private IReadOnlyList<Event>? Events;

    protected override async Task OnInitializedAsync()
    {
        Events = await EventService.GetEventsAsync();
    }
}
